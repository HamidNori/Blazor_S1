@using Components.Pages;
@inject Blazor_S1.Service.TodoService TodoService

<div class="button-container">
    <NavLink class="button" href="/" style="color: white;">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024" stroke-width="0" fill="currentColor" stroke="currentColor" class="icon">
        <path d="M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"></path>
    </svg>
    </NavLink>
    <div class="add-todo-dialog @(_showDialog ? "show" : "")">
        <input @bind="newTodo" placeholder="Enter new todo" />
        <button @onclick="HandleAdd">Add</button>
        <button @onclick="() => _showDialog = false">Cancel</button>
    </div>
    <button @onclick="() => _showDialog = true" style="padding: 20px; background-color: rgba(245, 73, 144); border-radius: 50%;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="2em" height="2em" stroke-width="0" fill="currentColor" stroke="currentColor" class="icon-add">
            <path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"/>
        </svg>    
    </button>
    <NavLink class="button" href="profile" style="color: white;">
    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" stroke-width="0" fill="currentColor" stroke="currentColor" class="icon">
        <path d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"></path>
    </svg>
    </NavLink>
</div>

@code {
    private string newTodo = "";
    private bool _showDialog = false;

    private void HandleAdd()
    {
        if (!string.IsNullOrWhiteSpace(newTodo))
        {
            TodoService.AddTodo(newTodo);
            newTodo = string.Empty;
            _showDialog = false;
        }
    }
}